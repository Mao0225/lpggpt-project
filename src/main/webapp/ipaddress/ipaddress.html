<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP地址管理</title>
    <script src="../css/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="../css/bootstrap-4.3.1-dist/css/bootstrap.min.css">
    <script src="../css/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/lpg.css">

    <style>
        #pagediv {
            background-color: #f0f0f0;
            color: black;
            padding: 10px;
        }

        table.list {
            width: 100%;
            border-collapse: collapse;
        }

        table.list th {
            background-color: #add8e6;
            color: black;
            padding: 8px;
            text-align: left;
            border: 1px solid #ddd;
        }

        table.list td {
            padding: 8px;
            border: 1px solid #ddd;
        }

        table.list tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        table.list tr:nth-child(odd) {
            background-color: #e0e0e0;
        }

        table.list tr:hover {
            background-color: #d3d3d3;
        }

        #pagediv .add {
            color: black;
        }

        #searchForm input[type="text"] {
            background-color: #f0f0f0;
        }

        #pagediv label {
            color: black;
        }

        .hint-text {
            color: #666;
            font-size: 0.8em;
            margin-left: 10px;
        }
    </style>
</head>
<body>
<div id="pagediv">
    <!-- 表单表单提交地址更新为新的列表页路由 -->
    <form id="searchForm" action="/ipaddress/iplist" method="post">
        <a href="/ipaddress/add" class="add openModal" data-title="新建IP地址"><b> + </b>新建IP地址</a>

        <label>设备编号:</label>
        <input type="text" name="deviceno" value="#(deviceno)">

        <label>设备开关命令:</label>
        <input type="text" name="poweronoff" value="#(poweronoff)">
        <span class="hint-text">10=正常，20=需要自动重启</span>

        <label>IP地址:</label>
        <input type="text" name="ipaddress" value="#(ipaddress)">

        <label>发生时间:</label>
        <input type="text" name="happendtime" value="#(happendtime)">

        <label>&nbsp;</label>
        <input value="搜索" type="submit">
        <input type="button" value="重置" id="resetBtn">
    </form>
</div>

<table class="list">
    <div>
        <button id="showFormButton" style="width: 30px; height: 30px; border: 2px solid transparent; border-radius: 50%; background-color: transparent; position: relative; float: right;">
            <img src="/img/find.png" alt="搜索" style="width: 30px; height: 30px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
        </button>

        <button id="fresh" style="width: 30px; height: 30px; border: 2px solid transparent; border-radius: 50%; background-color: transparent; position: relative;  margin-right: 10px;float: right;">
            <img src="/img/refresh2.png" alt="刷新" style="width: 25px; height: 25px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
        </button>
    </div>

    <tbody>
    <tr>
        <th width="10%">序号</th>
        <th width="15%">设备编号</th>
        <th width="15%">设备开关命令</th>
        <th width="15%">IP地址</th>
        <th width="15%">发生时间</th>
        <th width="20%">操作</th>
    </tr>
    #set(startIndex = (ipaddressPage.pageNumber - 1) * ipaddressPage.pageSize + 1)
    #for(x : ipaddressPage.getList())
    <tr>
        <td style="text-align:center">#(startIndex++)</td>
        <td style="text-align:center">#(x.deviceno)</td>
        <!-- 设备开关命令显示转换 -->
        <td style="text-align:center">
            #if(x.poweronoff == "10")
            正常
            #elseif(x.poweronoff == "20")
            需要自动重启
            #else
            #(x.poweronoff)
            #end
        </td>
        <td style="text-align:center">#(x.ipaddress)</td>
        <td style="text-align:center">#(x.happendtime)</td>
        <td style="text-align:left">
            &nbsp;&nbsp;<a href="#" onclick="confirmDelete('#(x.id)')">删除</a>
            <a href="/ipaddress/edit/#(x.id)">修改</a>
        </td>
    </tr>
    #end
    </tbody>
</table>

<div class="pagination" style="color:#000000;">
    #@paginate(ipaddressPage.pageNumber, ipaddressPage.totalPage, "/ipaddress/iplist?deviceno=" + (deviceno != null ? deviceno : "") + "&poweronoff=" + (poweronoff != null ? poweronoff : "") + "&ipaddress=" + (ipaddress != null ? ipaddress : "") + "&happendtime=" + (happendtime != null ? happendtime : "") + "&page=")
</div>

<script>
    function confirmDelete(id) {
        if (confirm("确定要删除吗？")) {
            window.location.href = "/ipaddress/delete/" + id;
        }
    }

    $('#resetBtn').click(function() {
        $('#searchForm input[type=text]').val('');
        $('#searchForm').attr('action', '/ipaddress/iplist').submit();
    });

    $('#fresh').click(function() {
        window.location.href = '/ipaddress/iplist';
    });

    $('#showFormButton').click(function() {
        var form = $('#searchForm');
        form.toggle();
    });
</script>
</body>
</html>