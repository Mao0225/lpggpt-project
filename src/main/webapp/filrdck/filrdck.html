<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>加气站充装记录管理</title>
  <link rel="stylesheet" href="../css/bootstrap-4.3.1-dist/css/bootstrap.min.css">
  <script src="../css/jquery-3.3.1.min.js"></script>
  <script src="../css/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #fff; }
    #pagediv { padding: 20px; background: #f0f0f0; border-radius: 6px; margin-bottom: 15px; }
    input, select { padding: 6px 10px; border: 1px solid #a3bffa; border-radius: 4px; margin-right: 6px; }
    input[type="submit"] { background: #007bff; color: white; border: none; }
    input[type="submit"]:hover { background: #0069d9; }
    table.list { width: 100%; border-collapse: collapse; margin-top: 15px; }
    table.list th, table.list td { padding: 10px; border: 1px solid #ddd; text-align: left; }
    table.list th { background-color: #add8e6; font-weight: 600; }
    table.list tr:nth-child(even) { background-color: #f2f2f2; }
    table.list tr:hover { background-color: #d3d3d3; }
    .text-red { color: red; }
    .pagination { margin-top: 20px; display: flex; justify-content: center; }
    .pagination a, .pagination span { padding: 6px 12px; margin: 0 2px; border: 1px solid #ddd; border-radius: 4px; text-decoration: none; color: #007bff; }
    .pagination .current { background-color: #007bff; color: white; border-color: #007bff; }
  </style>
</head>
<body>

<div id="pagediv">
  <form id="searchForm" action="/filrdck/filrdcklist" method="get">
    <label> 时间查找：</label>
    <input type="date" name="finditem" value="#(finditem)">
    <label> 加气站查找：</label>
    <select id="selectName" name="gastion_select">
      <option value="">请选择加气站</option>
      #for(x : stations)
      #if(gastion != null && !gastion.isEmpty() && x.companyid.toString() == gastion.toString())
      <option value="#(x.companyid)" selected>#(x.station_name)</option>
      #else
      <option value="#(x.companyid)">#(x.station_name)</option>
      #end
      #end
    </select>

    <label> 编号查找：</label>
    <input type="text" name="gasname" value="#(gasname)">
    <input type="submit" value="提交">
    <input type="button" value="重置" name="refresh"/>
  </form>
</div>
<script>
  // 提交和重置逻辑
  document.addEventListener("DOMContentLoaded", function() {
    // 重置按钮
    var refreshButtons = document.getElementsByName("refresh");
    for (var i = 0; i < refreshButtons.length; i++) {
      refreshButtons[i].addEventListener('click', function() {
        // 清空表单输入框
        var inputs = document.querySelectorAll('#searchForm input[type=text], #searchForm input[type=date]');
        for (var j = 0; j < inputs.length; j++) {
          inputs[j].value = "";
        }
        // 清空下拉框
        document.getElementById("selectName").value = "";
        // 提交表单
        document.getElementById("searchForm").submit();
      });
    }
  });
</script>

<table class="list">
  <thead>
  <tr>
    <th>序号</th>
    <th>气瓶编号</th>
    <th>气瓶终止使用日期</th>
    <th>充装介质</th>
    <th>充装规格</th>
    <th>充装前检查</th>
    <th>充装后检查</th>
    <th>充气时间</th>
    <th>皮重</th>
    <th>灌装量</th>
    <th>充装时长</th>
    <th>枪号</th>
    <th>充装人员</th>
    <th>检查人员</th>
    <th>所属站点</th>
  </tr>
  </thead>
  <tbody>
  #set(startIndex = (filrdck.pageNumber - 1) * filrdck.pageSize + 1)
  #for(x : filrdck.getList())
  <tr>
    <td>#(startIndex++)</td>
    <td>#(x.gas_number)</td>
    <td>#(x.terminate_use_date)</td>
    <td>#(x.filling_medium)</td>
    <td>#(x.filling_specification)</td>
    <td>#(x.before_filling)</td>
    <td>#(x.after_filling)</td>
    <td>#(x.fill_time)</td>
    <td>#(x.pressure_begin)</td>
    <td>#(x.now_gas)</td>
    <td>#(x.add_gas_long)</td>
    <td>#(x.gun_no)</td>
    <td>#(x.filling_staff_name)</td>
    <td>#(x.filling_check_staff_name)</td>
    <td>
      #set(foundStation=false)
      #for(g : gastiond)
      #if(x.gasstation == g.station_id)
      #(g.station_name)
      #set(foundStation=true)
      #end
      #end
      #if(!foundStation)
      #(x.gasstation)
      #end
    </td>
  </tr>
  #end
  </tbody>
</table>

<div class="pagination">
  #@paginate(filrdck.pageNumber, filrdck.totalPage,
  "/filrdck/filrdcklist?finditem=" + (finditem != null ? finditem : '') +
  "&gastion_select=" + (gastion != null ? gastion : '') +
  "&gasname=" + (gasname != null ? gasname : '') + "&pageNum=")
</div>

</body>
</html>
